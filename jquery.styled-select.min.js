(function(e){var t=function(t,n){var r=this.$element=e(t),i=this.$list=e("<ul/>");$toggle=this.$toggle,this.options=new Array;this.opts=n;this.init()};t.prototype={constructor:t,init:function(){this.bind()},bind:function(){var e=this;this.getAttributes();this.getOptions();this.createToggle();this.createList();this.checkValue();this.$list.hide();this.$element.hide()},getAttributes:function(){this.opts.classPrefix=this.$element.attr("data-ssel-class")?this.$element.attr("data-ssel-class"):this.opts.classPrefix;this.opts.toggleText=this.$element.attr("data-ssel-toggletext")?this.$element.attr("data-ssel-toggletext"):this.opts.toggleText},getOptions:function(){var t=this;this.$element.children().each(function(){if(typeof e(this).attr("value")!="undefined"){var n={value:e(this).attr("value"),text:e(this).text()};t.options.push(n)}})},createToggle:function(){var t=this;this.$toggle=e("<a/>").attr("href","#").addClass(this.opts.classPrefix+"toggle").text(this.opts.toggleText);this.$element.after(this.$toggle);this.$toggle.on("click",function(n){n.preventDefault();t.$list.toggle();e(this).toggleClass("active")})},createList:function(){var t=this;e.each(this.options,function(n,r){var i=e("<li/>").append(e("<a/>").attr("href",r.value).text(r.text));t.$list.append(i)});this.$list.addClass(this.opts.classPrefix+"options");this.$toggle.after(this.$list);e("."+this.opts.classPrefix+"options a").on("click",function(n){n.preventDefault();t.$element.val(e(this).attr("href"));t.$toggle.text(e(this).text()).addClass(t.opts.classPrefix+"toggle--selected").removeClass("active");t.$list.hide()})},checkValue:function(){var e=this.$element.children("[selected]");if(e.length){this.$toggle.text(e.text())}}};e.fn.styledselect=function(n,r){var i;if(typeof n==="object"&&n){i=e.extend(true,{},e.fn.styledselect.defaults,n)}else{i=e.extend(true,{},e.fn.styledselect.defaults)}return this.each(function(){var s=e(this),o=s.data("styledselect");if(!o){s.data("styledselect",o=new t(this,i))}if(typeof n==="string"){o[n](r)}})};e.fn.styledselect.defaults={classPrefix:"styled-select__",toggleText:"Please select"};e(window).load(function(){e("[data-ssel]").each(function(){e(this).styledselect()})})})(jQuery)